# Lab4 Windows クライアントにAspera Desktopの導入とアップロード/ダウンロード試験  
Lab3ではAsperaのWebUIを利用し、Aspera Connect経由でファイルの転送を行いました。Lab4ではクライアントソフトウェアであるAspera Desktop Clientを利用してAspera HST Serverとファイル転送を行います。  
作業概要は下記になります。

- Aspera Desktop Clientのインストール
- ファイル転送の試験、帯域の変更

## Aspera Desktop Clientのインストール  
Hyper-V上に用意されているWindows 10を利用し、Aspera Desktopをインストールします。  

### 手順  

1. デスクトップ上のリンクからFirefoxを起動します。

2. **Aspera desktop client windows** と入力し、Enterを押打します。  

3. 検索結果で **aspera client - Aspera Downloads **のエントリがでますので、クリックします。  
   - URL: https://downloads.asperasoft.com/en/downloads/2

4. ドロップダウンリストから **v3.9.3 - Windows** を選択します。  

5. **Download**ボタンをクリックします。 ポップアップが表示されますので、**ファイルに保存**を選択し、ダウンロードします。  

6. Firefoxのダウンロードファイル一覧からダウンロードしたファイルをクリックし、実行します。

7. UACのセキュリティポップアップが表示されますので、*はい*を選択します。  

8. セットアップウィザードが表示されます。**次へ**をクリックします。  

9. 標準を選択します。  
   
10. Asperaサービスアカウントを作成します。ユーザー名は変えずに、パスワードだけ入力し、**次へ**をクリックします。  
    - password: Aspera123!

11. ユーザー作成の警告が表示されます。 **はい**を選択します。  

12. インストールをクリックします。  

13. **完了**をクリックします。 

14. Aspera Desktop Clientが表示されます。 **接続**をクリックします。 

15. *接続*タブで左上の＋ボタンを押打し、ホスト、ユーザー、パスワードを指定します。  
    - ホスト: asperaserver.local
    - ユーザー: aspuser01
    - パスワード: aspera  
    
    設定後、**接続のテスト**をクリックします。 **サーバーに正常にアクセスしました**を表示されることを確認し、**OK**をクリックします。   

16. Desktop Clientの右カラムに **aspuser01@asperaserver.local** のエントリが追加されていますのでダブルクリックします。  

17. Aspera HST Serverの */docroot* のファイルが表示されます。フォルダーのアイコンをクリックし、新しいフォルダーを作ります。今回は **Desktop_client_test**と作っています。 作成したフォルダーをダブルクリックし移動します。   

18. 左側のカラムで デスクトップ(C:\users\user\desktop)に移動し、**テストファイル1.txt** を選択し、**[▶]** をクリックし転送します。

19. 転送中、完了後のステータスは下部の転送タブから確認できます。  


## ファイル転送の試験及び帯域の変更  
ファイル転送（アップロード）の試験と使用する帯域の設定について確認します。  

### 手順  
1. Desktop Clientで左カラムをデスクトップ、右カラムをAspera HST Serverの先ほど作成したフォルダーを表示します。  

2. **testfile_1GB**を選択し、**[▶]** をクリックし転送します。

3. 転送タブの速度を確認すると、速度が **45Mbps** 程度で止まっています。
   時間がかかりますので、転送タブで対象のエントリを選択し **[■]** で一時停止し、**[×]** で一度エントリを削除します。  

4. 右上の**設定**をクリックします。転送のステータスが表示されます。  
   デフォルト目標速度を ダウンロード、アップロードともに **1Gbps** に変更し、OKをクリックします。  


5. 再度、**testfile_1GB**を選択し、**[▶]** をクリックし転送します。転送速度が 45Mbps以上（画像では920Mbps)になり、高速に転送されていることが確認できます。  



以上でLab4は終了になります。 次のLab5では、Linuxサーバー（CentOS)を使ってCLIベースでAsperaのファイル転送を行います。  


